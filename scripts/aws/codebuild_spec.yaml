version: 0.2
phases:
  build:
    commands:
      - echo "Build"
      - ./mvnw clean install
      - ls target
  post_build:
    commands:
      - echo "Deploy"
      - echo $SETTINGS > maven-deploy-settings.xml
      - cat maven-deploy-settings.xml
      - export REPOSITORY_TOKEN=$( aws cicd codeartifact get-authorization-token --domain $REPOSITORY_DOMAIN --query authorizationToken --output text )
      - ./mvnw deploy
artifacts:
  files:
    - 'dist/**'
